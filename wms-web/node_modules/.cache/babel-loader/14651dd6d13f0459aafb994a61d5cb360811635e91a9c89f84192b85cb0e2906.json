{"ast":null,"code":"export default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Login\",\n  data() {\n    return {\n      confirm_disabled: false,\n      loginForm: {\n        no: '',\n        password: ''\n      },\n      rules: {\n        no: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    confirm() {\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          //valid成功为true，失败为false\n          //去后台验证用户名密码\n          this.$axios.post(this.$httpUrl + '/user/login', this.loginForm).then(res => res.data).then(res => {\n            console.log('res:', res);\n            if (res.code === 200) {\n              //存储\n              console.log('res.data:', res.data);\n              console.log(\"res.data.user:\", res.data.name);\n              sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data));\n              console.log(\"session:\" + sessionStorage.getItem(\"CurUser\"));\n              // console.log(res.data.menu, '-------')\n              this.$store.commit(\"setMenu\", res.data.menu);\n              //跳转到主页\n              this.$router.replace('/Home');\n              console.log(JSON.parse(sessionStorage.getItem(\"CurUser\")).name);\n            } else {\n              this.confirm_disabled = false;\n              this.$notify.error({\n                title: '错误',\n                message: '账号或密码错误！'\n              });\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled = false;\n          console.log('校验失败');\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA0BA;EACA;EACAA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAF,KACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAJ,WACA;UAAAE;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;UAAA;UACA;UACA;YACAC;YACA;cACA;cACAA;cACAA;cACAC;cACAD;cACA;cACA;cACA;cACA;cACAA;YACA;cACA;cACA;gBACAE;gBACAN;cACA;cAEA;YACA;UACA;QACA;UACA;UACAI;UACA;QACA;MACA;IAGA;EACA;AACA","names":["name","data","confirm_disabled","loginForm","no","password","rules","required","message","trigger","methods","confirm","console","sessionStorage","title"],"sourceRoot":"src/components","sources":["Login.vue"],"sourcesContent":["<template>\n  <div class=\"loginBody\">\n    <div class=\"loginDiv\">\n      <div class=\"login-content\">\n        <h1 class=\"login-title\">仓库管理系统</h1>\n        <el-form :model=\"loginForm\" label-width=\"100px\"\n                 :rules=\"rules\" ref=\"loginForm\">\n          <el-form-item label=\"账号\" prop=\"no\">\n            <el-input style=\"width: 200px\" type=\"text\" v-model=\"loginForm.no\"\n                      autocomplete=\"off\" size=\"small\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input style=\"width: 200px\" type=\"password\" v-model=\"loginForm.password\"\n                      show-password autocomplete=\"off\" size=\"small\" @keyup.enter.native=\"confirm\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"confirm\" :disabled=\"confirm_disabled\">确 定</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Login\",\n  data() {\n    return {\n      confirm_disabled: false,\n      loginForm: {\n        no: '',\n        password: ''\n      },\n      rules: {\n        no: [\n          {required: true, message: '请输入账号', trigger: 'blur'}\n        ],\n        password: [\n          {required: true, message: '请输密码', trigger: 'blur'}\n        ],\n      }\n    }\n  },\n  methods: {\n    confirm() {\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) { //valid成功为true，失败为false\n          //去后台验证用户名密码\n          this.$axios.post(this.$httpUrl + '/user/login', this.loginForm).then(res => res.data).then(res => {\n            console.log('res:',res)\n            if (res.code === 200) {\n              //存储\n              console.log('res.data:',res.data)\n              console.log(\"res.data.user:\",res.data.name)\n              sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data))\n              console.log(\"session:\"+sessionStorage.getItem(\"CurUser\"))\n              // console.log(res.data.menu, '-------')\n              this.$store.commit(\"setMenu\", res.data.menu)\n              //跳转到主页\n              this.$router.replace('/Home');\n              console.log(JSON.parse(sessionStorage.getItem(\"CurUser\")).name)\n            } else {\n              this.confirm_disabled = false;\n              this.$notify.error({\n                title: '错误',\n                message: '账号或密码错误！'\n              });\n\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled = false;\n          console.log('校验失败');\n          return false;\n        }\n      })\n      ;\n\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loginBody {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #B3C0D1;\n}\n\n.loginDiv {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -200px;\n  margin-left: -250px;\n  width: 450px;\n  height: 330px;\n  background: #fff;\n  border-radius: 5%;\n\n}\n\n.login-title {\n  margin: 20px 0;\n  text-align: center;\n}\n\n.login-content {\n  width: 400px;\n  height: 250px;\n  position: absolute;\n  top: 25px;\n  left: 25px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}